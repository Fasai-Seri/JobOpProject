{% extends "layout.html" %}
{% load static %}

{% block body %}

<h1>Create Job Post</h1>

<p>{{ fill_company }}</p>

{% if warning %}
{{ warning }}

{% else %}
<form action="{% url 'job_post:create_job_post' %}" method="post" enctype="multipart/form-data">
    {% csrf_token %}
    <div class="form-group">
        *Job Title: <input class="form-control" name="job_title">
    </div>
    <div class="form-group">
        *Job Type: 
        <select name="job_type" class="form-control">
            <option value=""></option>
            {% for choice in job_type_choices %}
            <option value="{{ choice.0 }}">{{ choice.1 }}</option>
            {% endfor %}   
        </select>
    </div>
    <div>
        *Company:
        {% if is_employer %}
        <select name="company" class="form-control dropdown_with_search" disabled>
            <option value="{{ request.user.emp_user_id.get.comp.pk }}" selected>{{ request.user.emp_user_id.get.comp.comp_name }}</option>
        </select>
        <input type="hidden" name="company" value="{{ request.user.emp_user_id.get.comp.pk }}">
        {% else %}
        <select name="company" class="form-control dropdown_with_search">
            <option value=""></option>
            {% for company in all_companies %}              
            <option value="{{ company.pk }}">{{ company.comp_name }}</option>
            {% endfor %}
        </select>
        {% endif %}
    </div>
    <div>
        Job Description:
        <textarea class="form-control" name="job_desc_text"></textarea>
        <input type="file" name="job_desc_file">
    </div>
    <div>
        Job Requirement:
        <textarea class="form-control" name="job_requirement_text"></textarea>
        <input type="file" name="job_requirement_file">
    </div>
    <div>
        Related Major:
        {% for major in all_major %}
        <label>
            <input type="checkbox" name="job_major" value="{{ major.pk }}">{{ major.major_id }}
        </label>
        {% endfor %}
    </div>
    <div>
        Close Date:
        <input type="datetime-local" class="form-control" name="job_close_date">
    </div>
    <div>
        Location:
        <textarea class="form-control" name="job_location"></textarea>
    </div>
    <input type="submit" class="btn btn-primary" value="Create"/>
</form>
{% endif %}
{% endblock %}

{% block script %}
<script>
    $(document).ready(function() {
        $('.dropdown_with_search').select2();
    });
</script>
{% endblock %}

{% extends "layout.html" %}
{% load static %}

{% block body %}

    <p>{{ fill_company }}</p>

    {% if warning %}
    {{ warning }}

    {% else %}
        <div class="container mt-3">
            <div class="row">
                <div class="col-md-12">
                    <div class="mb-3 bg-light p-4 rounded shadow-sm">
                        <h4>Create Job Post</h4>
                        <hr>
                        <form action="{% url 'job_post:create_job_post' %}" method="post" enctype="multipart/form-data">
                            {% csrf_token %}
                            <div class="form-group">
                                * Job Title:<input class="form-control" name="job_title" required>
                            </div>
                            <div class="form-group">
                                * Job Type: 
                                <select name="job_type" class="form-control" required>
                                    <option value=""></option>
                                    {% for choice in job_type_choices %}
                                    <option value="{{ choice.0 }}">{{ choice.1 }}</option>
                                    {% endfor %}   
                                </select>
                            </div>
                            <div>
                                * Company:
                                {% if is_employer %}
                                <select name="company" class="form-control dropdown_with_search" disabled required>
                                    <option value="{{ request.user.emp_user_id.get.comp.pk }}" selected>{{ request.user.emp_user_id.get.comp.comp_name }}</option>
                                </select>
                                <input type="hidden" name="company" value="{{ request.user.emp_user_id.get.comp.pk }}">
                                {% else %}
                                <select name="company" class="form-control dropdown_with_search" required>
                                    <option value=""></option>
                                    {% for company in all_companies %}              
                                    <option value="{{ company.pk }}">{{ company.comp_name }}</option>
                                    {% endfor %}
                                </select>
                                {% endif %}
                            </div>
                            <div>
                                Upload Job Information File:
                                <input type="file" name="job_info_file">
                            </div>
                            <div>
                                Job Description:
                                <textarea class="form-control" name="job_desc_text"></textarea>
                            </div>
                            <div>
                                Job Requirement:
                                <textarea class="form-control" name="job_requirement_text"></textarea>
                            </div>
                            <div>
                                Related Major:
                                {% for major in all_major %}
                                <label>
                                    <input type="checkbox" name="job_major" value="{{ major.pk }}">{{ major.major_id }}
                                </label>
                                {% endfor %}
                            </div>
                            <div>
                                Close Date:
                                <input type="datetime-local" class="form-control" name="job_close_date">
                            </div>
                            <div>
                                Location:
                                <textarea class="form-control" name="job_location"></textarea>
                            </div>
                            <div id="job_location"></div>
                            <input type="submit" class="btn btn-primary" value="Create"/>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    {% endif %}
{% endblock %}

{% block script %}
<script>
    $(document).ready(function() {
        $('.dropdown_with_search').select2();
    });
</script>
<script
  id="create_job_post_script"
  type="text/babel"
  src="../static/job_post/Javascript/create_job_post.js"
  data-csrf-token="{{ csrf_token }}"
></script>
{% endblock %}
